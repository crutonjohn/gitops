---
version: "3"

set:
  - pipefail
shopt:
  - globstar

vars:
  CLUSTER: '{{.CLUSTER | default "mainv3"}}'
  CLUSTER_DIR: "{{.ROOT_DIR}}/clusters/{{.CLUSTER}}"
  PROJECT_DIR:
    sh: "git rev-parse --show-toplevel"

env:
  MINIJINJA_CONFIG_FILE: "{{.ROOT_DIR}}/.minijinja.toml"

includes:
  flux: .taskfiles/flux
  # k0s: .taskfiles/k0s
  # rook: .taskfiles/rook
  volsync: ".taskfiles/volsync"
  talos: ".taskfiles/talos"

tasks:
  default:
    silent: true
    cmds:
      - task -l

  noop:
    internal: true
    silent: true
    cmd: noop() { :; }
